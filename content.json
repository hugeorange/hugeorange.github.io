{"pages":[],"posts":[{"title":"移动端局部滚动、标题吸顶、监听滚动","text":"一直以来我的脑子里有一种执念(大约是2016年开始的)，就是移动端无法做局部滚动，即对一个 div 设置 overflow: scroll 是无法滚动，所以才有了像 iScroll 、 Better-scroll 这样的库，但现在已经是 9012 年了，我发现移动端局部 滚动已经支持的很好了 问题介绍最近碰到一个这样的需求，如下图所示：一个列表左侧边栏固定，右边内容部分可以滚动，同时上测标题栏可以吸顶 想法： 将整个区块分为上下两部分，上侧可以在吸顶的时候做 fixed 处理，然后每个区块再分为左右两部分，用 flex 布局，左侧固定宽度，右侧flex: 1占据剩余宽度。 右侧滚动区域可以用better-scroll做滚动处理，然后由于吸顶部分和内容分开，所以需要实例化两个BScroll实例。然后当任意一个实例滚动时需要监听其scroll事件，让另一个实例也滚动到 相应的scrollLeft位置，在ios、安卓浏览器上都可以很完美的运行。但由于我们是hybird开发模式，拿到native上运行就有问题了（如图所示，我们的页面是嵌在新闻、赛程、球员、数据...下的，每个tab就是一个webview，tab之间支持手势左滑右滑，这个时候用better-scroll滚动时，就会触发native的slider事件，tab就被切换掉了，导致内容无法被滑动查看，后期找native开发人员请教下是怎么处理slider事件的） 解决方法 用原生scroll滚动 ，右侧元素设置overflow: scroll; -webkit-overflow-scrolling: touch; (ios惯性滚动)，然后监听wrap的scroll事件 ios： 体验完美，在wrap范围内滚动不会触发native slide事件，并且有很好的边界回弹效果，出现滚动条， 安卓：滚动也很流畅，但没有边界回弹效果并且当滚动到某一侧边界时依旧会触发native slide事件，不会出现滚动条 伪代码 React 代码演示123456789101112131415161718192021222324252627282930313233343536373839404142434445componentDidMount() { // 标准模式和混杂模式的窗体滚动元素的获取 this.windowEl = document.scrollingElement || document.documentElement this.titleTop = this.titleRef.offsetTop window.addEventListener('scroll', () =&gt; this.wScroll())}// 吸顶处理wScroll() { if (this.windowEl.scrollTop == this.titleTop) { this.titleRef.classList.add('fixed') }}handleScroll = e =&gt; { let left = e.target.scrollLeft this.titleRef.scrollLeft = left };/** 监测捕获阶段的事件 onScroll 这都位于React合成事件，处于冒泡阶段 此处其实也可以绑定 wrap 的原生scroll事件 各种阶段事件触发的顺序：捕获 -&gt; 冒泡 -&gt; 原生 addEventListener('scroll')*/render() { return ( &lt;&gt; &lt;div className=\"title\" ref={ref=&gt;this.titleRef=ref}&gt; &lt;ul className=\"list\"&gt;...&lt;/ul&gt; &lt;/div&gt; &lt;div className=\"wrap\" onScrollCapture={this.captureScroll} &gt; &lt;ul className=\"list\"&gt;...&lt;/ul&gt; &lt;/div&gt; &lt;/&gt; );}------------css.title, .wrap { overflow: scroll; -webkit-overflow-scrolling: touch;} 关于使用局部滚动出现的一些问题的处理方法 -webkit-overflow-scrolling:touch 使用的问题 移动web滚动问题：scroll事件的触发时机 scroll触发时机 ios scroll 事件的问题 移动端弹窗时阻止body滚动 通讯录式吸顶 react合成事件，捕获阶段、冒泡阶段触发不同","link":"/2019/10/27/19-10-27_移动端局部滚动/"},{"title":"hexo & Icarus 博客搭建总结","text":"一直想把博客重新搞一搞，之前用得是next主题的，不是很好看，后来又为了学习nodejs及阿里云服务器相关知识，自己用 express + mongoDB搞了一个小站点，内容平台用 react + koa2 + mongoDB ，但随着阿里云 服务器快要过期了，也懒得折腾了，遂又想到了 hexo，并且找了一个很简洁漂亮的主题-Icarus，经过一番修改就有了现在的站点，该站点完全静态托管于 github hexo 博客的搭建 直接参照官网即可 地址 github上创建一个和 [username].github.io 的repo，master 上放 hexo deploy的代码，我又创建了一个blog分支，用于存放博客源码 自定义主题选择 对比了好多主题最终觉得这个主题比较简洁大方 - Icarus 使用时对该主题样式魔改了好多 魔改后的代码地址-themes/icarus 想替换提供基础资源的cdn呢，发现该主题只能替换cdn域名，后面的参数都是硬编码的，故未替换 统计网站uv、pv用的主题自带的 不蒜子，只要将_config.yml里面的busuanzi: true，发现一个问题当用手机访问时，连续刷新会造成 uv 统计不准确，还没找到原因 评论插件用的主题自带的 gitment，需要配置一下参数 gitment 配置12345678910comment: # Name of the comment plugin type: gitment owner: hugeorange # 账户名称 repo: hugeorange.github.io # 评论存储的仓库，评论数据存储到该仓库内的issue里 client_id: [your client_id] # 一下两个密码需要在github里注册OAuth Application client_secret: [your client_secret] 注册地址：https://github.com/settings/applications/new 注册关键字说明：https://imsun.net/posts/gitment-introduction/ 使用过程中发现一个问题，当当前文章没有评论数据，会返回一个 Error: Comments Not Initialized，或者显示一个Initialize Comments的按钮，翻了一下该项目的issue暂时未找到原因 另外在 火狐 safari 会报跨域问题 已拦截跨源请求：同源策略禁止读取位于 https://gh-oauth.imsun.net/ 的远程资源。（原因：CORS 请求未能成功）。[详细了解]，chrome是好的， 因为 github 的服务不允许跨域访问，所以作者搞了一个简单的代理服务，目前还不清楚是什么问题，gh-oauth.imsun.net代理服务 10-08 日更新：今天看到 gitment仓库的里面的issue 原来是作者用来做跨域的认证服务证书到期了（奇怪的是这个服务偶尔好偶尔坏），按照 issue 里面的说法，将 js、css 文件替换掉了，然后访问发现使用了一个叫做 HeroKu 的免费云服务替代了作者的服务 魔改底部增加网站运行时间功能 代码地址 Icarus 增加两个菜单-关于、工具 关于页面排版布局和其他页面一致，只需要在增加 layout/about.ejs、 includes/generator/about.js 并在入口 scripts/index.js 增加响应入口即可 小工具页面我不想要侧边 widget 了，初始时想着能在 tool.ejs 这个页面里做些处理就ok，但事实并非我想的这么简单，hexo用的是 ejs 模板，入口是 layout.ejs，不知道为什么我在这个文件里拿不到 generator/tool.js里面的声明的变量，但是可以拿到当前路径的 path 变量，由于对 hexo 和 ejs 都不怎么了解，所以采取了以下硬编码的临时方案，以后再进行优化 layout/layout.ejs1234567891011121314&lt;section class=\"section\"&gt; &lt;div class=\"container\"&gt; &lt;div class=\"columns\"&gt; &lt;!-- 此处硬编码，来判断是否需要全屏，不了解 hexo 机制，不熟悉ejs模板，后期有机会优化吧 --&gt; &lt;% if (path !== 'tool/index.html') { %&gt; &lt;div class=\"column &lt;%= main_column_class() %&gt; has-order-2 column-main\"&gt;&lt;%- body %&gt;&lt;/div&gt; &lt;%- _partial('common/widget', { position: 'left' }) %&gt; &lt;%- _partial('common/widget', { position: 'right' }) %&gt; &lt;% } else { %&gt; &lt;div class=\"column column-main\"&gt;&lt;%- body %&gt; &lt;%- path %&gt;&lt;/div&gt; &lt;% } %&gt; &lt;/div&gt; &lt;/div&gt;&lt;/section&gt; 配置相关 update: 2019-10-17 将资源部署到 codeing ，并用自己的域名来访问站点，需要在阿里云域名解析后天配置域名解析指向coding的服务。参考 百度seo处理 把github hugeorange.github.io 仓库的 deploy 分支作为部署代码的分支，master 作为源代码分支（失败了，好像hexo 必须部署到github 的master分支上）hexo 相关的命令 每次 hexo deploy 的时候github的 repo 的master的提交历史都会被重写，这里有一个解释 主题魔改-参考 alphalxy xxs yearito 知乎讨论 官方文档-写作、 yearito-写作 –","link":"/2019/10/05/19-10-06_hexo搭建/"},{"title":"charles 抓包","text":"开发 hybird app 时，需要用到 charles 抓包工具，来分析网络请求，记录下安装配置的过程，以免日后忘记 安装、破解（系统环境：mac） 下载地址 破解程序、csdn上的大佬 - 感谢大佬们的无私奉献。 配置 (电脑安装证书并信任、ios安装证书并信任) 电脑端：启动后会自动帮我开启代理即勾选 Proxy -&gt; macOS Proxy（如未自动勾选，请自行手动勾选），然后在电脑上安装证书，然后在钥匙串中信任该证书 - 如下图所示，这样就可以抓取电脑上的所有网络请求了（如果发现未能成功代理，请检查本机网络设置里面的高级 -&gt; 代理，注意：可能回和翻墙代理产生冲突） 手机端（ios）： 首先确保电脑和手机连的同一 wifi，然后选择所连的wifi -&gt; 配置代理:选择 手动 -&gt; 填写服务器（即电脑 ip地址）-&gt; 端口号(charles默认 8888) 手机端安装证书，点击上图所示的 install root certification in mobile device，弹出下图 访问上图所示地址下载安装证书: 安装位置 设置 -&gt; 通用 -&gt; 描述文件 信任证书：设置 -&gt; 通用 -&gt; 关于本机 -&gt; 证书信任设置 完成以上步骤即可通过 charles 抓取 hybird app 上的网络请求了 charles 使用技巧 现在一般都是 https 请求了，charles 抓取到的 https 请求都是乱码，需要在该请求上右键点击 Enable SSL Proxy，再重新请求就可以明文显示https请求了 未完待续…","link":"/2019/11/09/19-11-09_charles抓包/"},{"title":"环境清单","text":"新公司入职前端开发环境工具清单 工具清单 chrome 浏览器 brew git （可用 brew 安装，或直接下载 xcode） item2 搭配 on my zsh nvm node yarn anywhere nrm vscode （相关插件 gitlens sublime 快捷键配置不用其主题、jump 插件…） …","link":"/2019/11/09/19-11-09_装机必备/"}],"tags":[{"name":"移动端","slug":"移动端","link":"/tags/移动端/"},{"name":"hexo","slug":"hexo","link":"/tags/hexo/"},{"name":"环境搭建","slug":"环境搭建","link":"/tags/环境搭建/"}],"categories":[{"name":"技术","slug":"技术","link":"/categories/技术/"},{"name":"环境搭建","slug":"技术/环境搭建","link":"/categories/技术/环境搭建/"},{"name":"移动端","slug":"技术/移动端","link":"/categories/技术/移动端/"},{"name":"hexo","slug":"技术/hexo","link":"/categories/技术/hexo/"}]}